#!/bin/sh

SLEEPTIME="2"
# Get tx and rx data from all interfaces.
[ -f /tmp/rxdata ] && PREVRX=$(($(cat /tmp/rxdata))) || PREVRX=0
[ -f /tmp/txdata ] && PREVTX=$(($(cat /tmp/txdata))) || PREVTX=0
RXBYTES=$(($(cat /sys/class/net/*/statistics/rx_bytes | paste -sd '+' | tee /tmp/rxdata)))
TXBYTES=$(($(cat /sys/class/net/*/statistics/tx_bytes | paste -sd '+' | tee /tmp/txdata)))
RXSPEED=$((($RXBYTES-$PREVRX)/1024))
TXSPEED=$((($TXBYTES-$PREVTX)/1024))

if [ $RXSPEED -gt $(($SLEEPTIME*1024)) ]; then
    RXSPEED="$(echo "scale=1; ($RXSPEED/($SLEEPTIME*1024))" | bc)M"
else
    RXSPEED="$(($RXSPEED/$SLEEPTIME))"K
fi
if [ $TXSPEED -gt $(($SLEEPTIME*1024)) ]; then
    TXSPEED="$(echo "scale=1; ($TXSPEED/($SLEEPTIME*1024))" | bc)M"
else
    TXSPEED="$(($TXSPEED/$SLEEPTIME))"K
fi

echo -n "⬇️ $RXSPEED  ⬆️ $TXSPEED"

# some arrow
#  
